# Automate Duty - Process CSV file on Trust Windows PC

The `process_duty_email.py` processes the end of duty CSV files generated by [duty_csv](https://github.com/moka-guys/duty_csv), downloading the files to CSV-defined locations. All runfolder-specific logic is stored in the CSV file; this script should perform the download based on CSV-defined inputs to reduce overhead in future updates.

The script is currently hard-coded to process CSV files located at:

```
P:\Bioinformatics\Duty_Bioinformatics_CSV
```

## Usage

The script requires the installation of python3-tk:
```
sudo apt-get install python3-tk
```

This repository is deployed on the GSTT network at:

```
S:\Genetics_Data2\Array\Software\process_duty_csv
```

It is recommended to create a powershell alias by following the instructions in [this KB article](https://viapath.service-now.com/nav_to.do?uri=%2Fkb_view.do%3Fsys_kb_id%3Df076201c1b4cd5500dc321f6b04bcbc7).

Instructions for running the script are detailed within the emails with the CSV attachments.

## Output

* DNAnexus output files (placed in the locations specified within the CSV file)
* Log file at `P:\Bioinformatics\Duty_Bioinformatics_CSV\process_logs`
* Upon successful download of all files, the script will move the CSV file to the archive folder (if an error occurs, the CSV file will not be moved), at `P:\Bioinformatics\Duty_Bioinformatics_CSV\archive`


### Developed by the Synnovis Genome Informatics Team
